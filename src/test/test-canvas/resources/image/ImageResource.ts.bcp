import { Media, MediaConstructOptions, MediaType } from '../media/Media';
import { AwaitHTMLImageElementLoaded, CreateHTMLImageElement } from './ImageHelper';

export interface ImageResourceConstructOptions extends Pick<MediaConstructOptions, 'id'| 'blob'> {
}

export class ImageResource extends Media implements ImageResourceConstructOptions {

  constructor(options: ImageResourceConstructOptions, shallow?: boolean) {
    super(Object.assign({ type: 'image' as  MediaType }, options), shallow);
  }

  toHTMLResource(): Promise<HTMLImageElement> {
    return this.toTemporaryObjectURL<HTMLImageElement>((url: string) => {
      return AwaitHTMLImageElementLoaded(CreateHTMLImageElement(url));
    });
  }
}
